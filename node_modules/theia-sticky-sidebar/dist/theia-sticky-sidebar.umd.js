(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.TheiaStickySidebar={}))})(this,function(o){"use strict";var x=Object.defineProperty;var H=(o,s,n)=>s in o?x(o,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[s]=n;var c=(o,s,n)=>H(o,typeof s!="symbol"?s+"":s,n);/*!
 * Theia Sticky Sidebar v2.0.0
 * https://github.com/WeCodePixels/theia-sticky-sidebar
 *
 * Glues your website's sidebars, making them permanently visible while scrolling.
 *
 * Copyright 2013-2025 WeCodePixels and other contributors
 * Released under the MIT license
 */class s{constructor(e){c(this,"options");c(this,"elements");c(this,"initialized",!1);c(this,"stickySidebars",[]);c(this,"unbind",()=>{document.removeEventListener("scroll",this.tryDelayedInit),window.removeEventListener("resize",this.tryDelayedInit),this.stickySidebars.forEach(e=>{document.removeEventListener("scroll",e.onScroll),window.removeEventListener("resize",e.onScroll),e.resizeObserver.disconnect()})});c(this,"tryInitOrHookIntoEvents",()=>{this.tryInit()||(this.options.verbose&&console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),document.addEventListener("scroll",this.tryDelayedInit),window.addEventListener("resize",this.tryDelayedInit))});c(this,"tryDelayedInit",()=>{this.tryInit()&&(document.removeEventListener("scroll",this.tryDelayedInit),window.removeEventListener("resize",this.tryDelayedInit))});const t={...{elements:"",containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",verbose:!1},...e};t.additionalMarginTop=Math.floor(e.additionalMarginTop||0),t.additionalMarginBottom=Math.floor(e.additionalMarginBottom||0),t.elements instanceof HTMLElement?this.elements=[t.elements]:t.elements instanceof Array?this.elements=t.elements:this.elements=Array.from(document.querySelectorAll(t.elements)),this.options=t,this.tryInitOrHookIntoEvents()}tryInit(){return this.initialized?!0:document.body.getBoundingClientRect().width<this.options.minWidth?!1:(this.init(),!0)}init(){this.initialized=!0,document.querySelector("#theia-sticky-sidebar-stylesheet")||document.head.insertAdjacentHTML("beforeend",'<style id="theia-sticky-sidebar-stylesheet">.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>'),this.elements.forEach(d=>{const t={};if(t.sidebar=d,t.options=this.options||{},t.container=t.options.containerSelector&&document.querySelector(t.options.containerSelector),t.container||(t.container=t.sidebar.parentNode),Object.assign(t.sidebar.style,{position:t.options.defaultPosition,overflow:"visible",boxSizing:"border-box"}),t.stickySidebar=t.sidebar.querySelector(".theiaStickySidebar"),!t.stickySidebar){const a=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i;Array.from(t.sidebar.querySelectorAll("script")).forEach(r=>{(r.type.length===0||r.type.match(a))&&r.remove()}),t.stickySidebar=document.createElement("div"),t.stickySidebar.classList.add("theiaStickySidebar"),t.stickySidebar.append(...t.sidebar.children),t.sidebar.append(t.stickySidebar)}const h=getComputedStyle(t.sidebar);t.marginBottom=parseFloat(h.marginBottom),t.paddingTop=parseFloat(h.paddingTop),t.paddingBottom=parseFloat(h.paddingBottom);let b=n(t.stickySidebar).top,y=t.stickySidebar.offsetHeight;t.stickySidebar.style.paddingTop="1px",t.stickySidebar.style.paddingBottom="1px",b-=n(t.stickySidebar).top,y=t.stickySidebar.offsetHeight-y-b,b==0?(t.stickySidebar.style.paddingTop="0px",t.stickySidebarPaddingTop=0):t.stickySidebarPaddingTop=1,y==0?(t.stickySidebar.style.paddingBottom="0px",t.stickySidebarPaddingBottom=0):t.stickySidebarPaddingBottom=1,t.previousScrollTop=0,t.fixedScrollTop=0,this.resetSidebar(t),t.onScroll=()=>{if(!this.isVisible(t.stickySidebar))return;if(document.body.getBoundingClientRect().width<t.options.minWidth){this.resetSidebar(t);return}if(t.options.disableOnResponsiveLayouts&&(getComputedStyle(t.sidebar).float==="none"?this.getOuterWidth(t.sidebar):t.sidebar.offsetWidth)+50>t.container.getBoundingClientRect().width){this.resetSidebar(t);return}const a=window.scrollY;let r="static";const p=n(t.sidebar);let i=0;if(a>=p.top+(t.paddingTop-t.options.additionalMarginTop)){const l=t.paddingTop+this.options.additionalMarginTop,k=t.paddingBottom+t.marginBottom+this.options.additionalMarginBottom,T=p.top,v=n(t.container).top+this.getClearedHeight(t.container),g=this.options.additionalMarginTop;let f;t.stickySidebar.offsetHeight+l+k<window.innerHeight?f=g+t.stickySidebar.offsetHeight:f=window.innerHeight-t.marginBottom-t.paddingBottom-this.options.additionalMarginBottom;const B=T-a+t.paddingTop,w=v-a-t.paddingBottom-t.marginBottom;i=n(t.stickySidebar).top-a;const S=t.previousScrollTop-a;getComputedStyle(t.stickySidebar).position==="fixed"&&t.options.sidebarBehavior=="modern"&&(i+=S),t.options.sidebarBehavior=="stick-to-top"&&(i=this.options.additionalMarginTop),t.options.sidebarBehavior=="stick-to-bottom"&&(i=f-t.stickySidebar.offsetHeight),S>0?i=Math.min(i,g):i=Math.max(i,f-t.stickySidebar.offsetHeight),i=Math.max(i,B),i=Math.min(i,w-t.stickySidebar.offsetHeight);const u=t.container.getBoundingClientRect().height==t.stickySidebar.offsetHeight;!u&&i==g||!u&&i==f-t.stickySidebar.offsetHeight?r="fixed":a+i-p.top-t.paddingTop<=this.options.additionalMarginTop?r="static":r="absolute"}if(r=="fixed")Object.assign(t.stickySidebar.style,{position:"fixed",width:t.stickySidebar.getBoundingClientRect().width+"px",transform:"translateY("+i+"px)",left:n(t.sidebar).left+parseFloat(getComputedStyle(t.sidebar).paddingLeft)-window.scrollX+"px",top:"0px"});else if(r=="absolute"){const l={};getComputedStyle(t.stickySidebar).position!=="absolute"&&(l.position="absolute",l.transform="translateY("+(a+i-p.top-t.stickySidebarPaddingTop-t.stickySidebarPaddingBottom)+"px)",l.top="0px"),l.width=t.stickySidebar.getBoundingClientRect().width+"px",l.left="",Object.assign(t.stickySidebar.style,l)}else r=="static"&&this.resetSidebar(t);r!="static"&&t.options.updateSidebarHeight&&(t.sidebar.style.minHeight=t.stickySidebar.offsetHeight+n(t.stickySidebar).top-p.top+t.paddingBottom+"px"),t.previousScrollTop=a},t.onScroll(),document.addEventListener("scroll",t.onScroll),window.addEventListener("resize",t.onScroll),t.resizeObserver=new ResizeObserver(()=>{t.onScroll()}),t.resizeObserver.observe(t.stickySidebar),this.stickySidebars.push(t)})}getOuterWidth(e){const d=getComputedStyle(e);return e.getBoundingClientRect().width+parseFloat(d.marginLeft)+parseFloat(d.marginRight)}isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}resetSidebar(e){e.fixedScrollTop=0,e.sidebar.style.minHeight="1px",Object.assign(e.stickySidebar.style,{position:"static",width:"",transform:"none"})}getClearedHeight(e){let d=e.getBoundingClientRect().height;return Array.from(e.children).forEach(t=>{d=Math.max(d,t.getBoundingClientRect().height)}),d}}function n(m){const e=m.getBoundingClientRect();return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}}o.TheiaStickySidebar=s,o.getOffset=n,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=theia-sticky-sidebar.umd.js.map
